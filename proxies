# ====== åŸºç¡€è®¾ç½® ======
mixed-port: 7890
allow-lan: false
mode: rule
log-level: info
external-controller: 127.0.0.1:9090

# ====== DNS é…ç½®ï¼ˆå¯ç”¨ Fake-IP é˜²æ±¡æŸ“ï¼‰[6,9](@ref) ======
dns:
  enable: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip  # ä¼ªé€ IPé˜²æ­¢DNSæ±¡æŸ“
  nameserver:
    - 114.114.114.114    # å›½å†…DNSï¼ˆç”µä¿¡ï¼‰
    - 8.8.8.8            # æµ·å¤–DNSï¼ˆGoogleï¼‰
  fallback:              # å¤‡ç”¨DNSï¼ˆä»£ç†ä¸“ç”¨ï¼‰
    - tls://1.1.1.1@853  # CloudflareåŠ å¯†DNS
    - https://dns.google/dns-query

# ====== ä»£ç†èŠ‚ç‚¹ï¼ˆSSRå•èŠ‚ç‚¹ï¼‰=====
proxies:
  - name: "SSRèŠ‚ç‚¹"
    type: ssr
    server: ssr2.762988.xyz
    port: 33336
    password: "dongtaiwang.com"
    cipher: chacha20-ietf
    protocol: auth_chain_a
    obfs: tls1.2_ticket_auth
    udp: true

  - name: "VLESSèŠ‚ç‚¹1"
    type: vless
    server: 157.254.223.64
    port: 23000
    uuid: bcb13ecb-4f63-4257-ae01-ec5aeaa613a5
    network: xhttp
    security: reality
    servername: mxj.myanimelist.net
    client-fingerprint: chrome
    reality-opts:
      public-key: dJFLqPCinyadJxJk7zA_DwBOEAvexvm7AZT2Pw84_EY
      short-id: 955275866feece09
    xhttp-opts:
      path: "/alvin9999.com"
      spx: "/"

  - name: "VMESSä¼ è¾“2-ipv6"
    type: vmess
    server: 2a14:7584:d04a::a
    port: 23456
    uuid: bd48e0ac-e90e-4451-a4f2-abf061cfb890
    alterId: 0
    cipher: auto
    udp: true
    network: ws
    ws-opts:
      path: "/alvin9999.com"
      headers:
        Host: "www.bing.com"

  - name: "Hysteria2èŠ‚ç‚¹4-ipv4"
    type: hysteria2
    server: 109.104.152.244
    port: 11220
    password: "dongtaiwang.com"
    sni: "apple.com"
    alpn:
      - "h3"
    skip-cert-verify: true

  - name: "Hysteria2èŠ‚ç‚¹3-ipv6"
    type: hysteria2
    server: "2a14:7584:d04a::a"
    port: 50022
    password: "dongtaiwang.com"
    sni: "apple.com"
    alpn:
      - "h3"
    skip-cert-verify: true


# ====== ç­–ç•¥ç»„ï¼ˆé€‚é…DNSåˆ†æµï¼‰=====
proxy-groups:
  # è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
  - name: "è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    proxies:
      - "SSRèŠ‚ç‚¹"
      - "VLESSèŠ‚ç‚¹1"
      - "VMESSä¼ è¾“2-ipv6"
      - "Hysteria2èŠ‚ç‚¹3-ipv6"
      - "Hysteria2èŠ‚ç‚¹4-ipv4"
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50

  # æ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹
  - name: "ğŸš€ ä»£ç†ç­–ç•¥"
    type: select
    proxies:
      - "è‡ªåŠ¨é€‰æ‹©"
      - "SSRèŠ‚ç‚¹"
      - "VLESSèŠ‚ç‚¹1"
      - "VMESSä¼ è¾“2-ipv6"
      - "Hysteria2èŠ‚ç‚¹3-ipv6"
      - "Hysteria2èŠ‚ç‚¹4-ipv4"
      - "DIRECT"

  # DNSä¸“ç”¨ç»„ï¼ˆå¼ºåˆ¶ä»£ç†æµ·å¤–DNSæŸ¥è¯¢ï¼‰
  - name: "DNS_PROXY"
    type: select
    proxies:
      - "è‡ªåŠ¨é€‰æ‹©"  # å¼ºåˆ¶DNSæŸ¥è¯¢èµ°ä»£ç†

# ====== è§„åˆ™åˆ†æµï¼ˆDNSå…³é”®ä¼˜åŒ–ï¼‰=====
rules:
  # å›½å†…ç›´è¿è§„åˆ™
  - GEOIP,CN,DIRECT              # ä¸­å›½å¤§é™†IPç›´è¿ [9](@ref)
  - DOMAIN-SUFFIX,cn,DIRECT      # ä¸­å›½åŸŸåç›´è¿
  
  # DNSå¼ºåˆ¶ä»£ç†è§„åˆ™ï¼ˆé¿å…æ±¡æŸ“ï¼‰
  - DST-PORT,53,DNS_PROXY        # æ‰€æœ‰53ç«¯å£DNSè¯·æ±‚å¼ºåˆ¶ä»£ç† [6](@ref)
  - IP-CIDR,8.8.8.8/32,DNS_PROXY # æŒ‡å®šæµ·å¤–DNSæœåŠ¡å™¨èµ°ä»£ç†
  
  # å›½é™…æœåŠ¡ä»£ç†
  - DOMAIN-SUFFIX,google.com,ğŸš€ ä»£ç†ç­–ç•¥
  - DOMAIN-SUFFIX,youtube.com,ğŸš€ ä»£ç†ç­–ç•¥
  
  # æœ€ç»ˆè§„åˆ™
  - MATCH,ğŸš€ ä»£ç†ç­–ç•¥
